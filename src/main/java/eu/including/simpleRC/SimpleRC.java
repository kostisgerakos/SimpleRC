package eu.including.simpleRC;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.ws.rs.client.Client;
import javax.ws.rs.client.ClientBuilder;
import javax.ws.rs.core.MediaType;

import org.glassfish.jersey.client.ClientConfig;
import org.glassfish.jersey.logging.LoggingFeature;
import org.javatuples.Pair;
import org.javatuples.Quartet;
import org.javatuples.Triplet;

import com.fasterxml.jackson.databind.ObjectMapper;

import eu.including.json.DdlScript;
import eu.including.json.NodeName;
import eu.including.json.requests.ResourceProjection;
import eu.including.simpleRC.consumers.SimpleRCConsumers;
import eu.including.simpleRC.model.Goto;
import eu.including.simpleRC.model.Mission;
import eu.including.simpleRC.model.MissionParameters;
import eu.including.simpleRC.model.Resource;
import eu.including.simpleRC.model.Task;
import eu.including.simpleRC.model.TaskItems;
import eu.including.simpleRC.producers.GotoProducer;
import eu.including.simpleRC.producers.ManualTaskProducer;

public class SimpleRC {
	
	private String target = "http://outlander4.di.uoa.gr:8181";
	private String getResourceReservation = "resourceByName";

	public static void main(String[] args) {
		
		SimpleRC rc = new SimpleRC();
		
		//String json = "{\"data\":[{\"location\":[{\"timestep\":0.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.657844,38.017445,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.657548957008363,38.01951030094147,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.6561327506485,38.01806190807343,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.65783863558197,38.02020767528534,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.661186032432557,38.01698902446747,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.661186032432557,38.01698902446747,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.661186032432557,38.01698902446747,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.661186032432557,38.01698902446747,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.662258916038514,38.020400794334414,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.662258916038514,38.020400794334414,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.662258916038514,38.020400794334414,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.662258916038514,38.020400794334414,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.662258916038514,38.020400794334414,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"sensor1;1\"},{\"sensorsActDeact\":\"sensor2;1\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[],[],[],[{\"command\":\"a1_Message\",\"duration\":2},{\"command\":\"v3_Message\",\"duration\":3},{\"command\":\"g5_Message\",\"duration\":7}],[{\"command\":\"a1_Message\",\"duration\":2},{\"command\":\"v3_Message\",\"duration\":3},{\"command\":\"g5_Message\",\"duration\":7}],[{\"command\":\"a1_Message\",\"duration\":2},{\"command\":\"v3_Message\",\"duration\":3},{\"command\":\"g5_Message\",\"duration\":7}],[{\"command\":\"a1_Message\",\"duration\":2},{\"command\":\"v3_Message\",\"duration\":3},{\"command\":\"g5_Message\",\"duration\":7}],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":1.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.657844,38.017445,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.657688431877137,38.01873782474518,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.656175665992738,38.01676371891022,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.65783863558197,38.02020767528534,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.662666611808778,38.016602786369326,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.662666611808778,38.016602786369326,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.662666611808778,38.016602786369326,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.662666611808778,38.016602786369326,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66181903376007,38.01927426654816,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66181903376007,38.01927426654816,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66181903376007,38.01927426654816,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66181903376007,38.01927426654816,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66181903376007,38.01927426654816,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[],[],[],[],[],[],[],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":2.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.657844,38.017445,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.65834289087677,38.018147738761904,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.65909390940094,38.015862496681216,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.65783863558197,38.02020767528534,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.664039902824403,38.01667788822174,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.664039902824403,38.01667788822174,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.664039902824403,38.01667788822174,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.664039902824403,38.01667788822174,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[],[],[],[],[],[],[],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":3.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.657844,38.017445,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.65931921495819,38.0176971276474,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.660177521842957,38.01577666599274,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.65783863558197,38.02020767528534,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.665434651512147,38.018115552253725,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.665434651512147,38.018115552253725,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.665434651512147,38.018115552253725,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.665434651512147,38.018115552253725,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"sensor1;0\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[],[],[],[],[],[],[],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":4.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.657844,38.017445,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.65931921495819,38.0176971276474,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.660177521842957,38.01577666599274,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.65783863558197,38.02020767528534,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.664436869758607,38.019113334007265,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.664436869758607,38.019113334007265,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.664436869758607,38.019113334007265,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.664436869758607,38.019113334007265,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.66132550730133,38.018137009925844,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"sensor2;1\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[],[],[],[],[],[],[],[{\"command\":\"G3_Message\",\"duration\":2}],[{\"command\":\"G3_Message\",\"duration\":2}],[{\"command\":\"G3_Message\",\"duration\":2}],[{\"command\":\"G3_Message\",\"duration\":2}],[{\"command\":\"G3_Message\",\"duration\":2}]]}]}],\"nodeNames\":[{\"nodeName\":\"sensor1\"},{\"nodeName\":\"sensor2\"},{\"nodeName\":\"operators1\"},{\"nodeName\":\"Backpacks\"},{\"nodeName\":\"operators4\"},{\"nodeName\":\"operators2\"},{\"nodeName\":\"operators3\"},{\"nodeName\":\"operators5\"},{\"nodeName\":\"operators1\"},{\"nodeName\":\"operators2\"},{\"nodeName\":\"operators3\"},{\"nodeName\":\"operators4\"},{\"nodeName\":\"operators5\"}],\"Area\":\"Haidari_geofence_area\"}";		
		//String json = "{\"data\":[{\"location\":[{\"timestep\":0.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.610734401466374,37.96383844047546,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611011292531142,37.96446638663171,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610804376403845,37.96461633804494,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61126687606516,37.96384968343314,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61124529274798,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61123722408472,37.963748918739434,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611043223523303,37.96432846703047,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61126687606516,37.96406911382446,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"0.0,0.0,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"Approach_incident_scene_search_ship_containers_and_deploy_to_the_incident_area\",\"duration\":1}],[{\"command\":\"Approach_incident_scene_search_ship_containers_and_deploy_to_the_incident_area\",\"duration\":1}],[{\"command\":\"Approach_incident_scene_search_ship_containers_and_deploy_to_the_incident_area\",\"duration\":1}],[{\"command\":\"Approach_incident_scene_search_ship_containers_and_deploy_to_the_incident_area\",\"duration\":1}],[{\"command\":\"Approach_incident_scene_search_ship_containers_and_deploy_to_the_incident_area\",\"duration\":1}],[{\"command\":\"Approach_incident_scene_search_ship_containers_and_deploy_to_the_incident_area_\",\"duration\":1}],[{\"command\":\"Approach_incident_scene_search_ship_containers_and_deploy_to_the_incident_area\",\"duration\":1}],[]]}]},{\"location\":[{\"timestep\":1.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.61034816336823,37.963795525131225,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611011292531142,37.96441804411885,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61061951300733,37.96464994957158,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611258851498516,37.96384857659636,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611233302016213,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611225203790035,37.96374601728899,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610946941161313,37.96432846703047,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611166153918326,37.96405472494634,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"11.805537874607476,18.982104279948235,15.5\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"Establish_and_Develop_decontamination_lines_\",\"duration\":1}],[{\"command\":\"Establish_-_Develop_decontamination_lines_and_equipment_\",\"duration\":1}],[],[],[],[{\"command\":\"Establish_Develop_decontamination_lines_and_equipment\",\"duration\":1}],[],[]]}]},{\"location\":[{\"timestep\":2.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.610262332679753,37.963774067459106,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611011292531142,37.96441804411885,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610367426557538,37.96468356109822,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611250826931872,37.963847469759585,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611221311284446,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611213183495348,37.96374311583855,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610931403531467,37.964328976460955,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611143671296265,37.964055624251216,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61107574921495,37.96420855989647,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[],[],[],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":3.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.60961860251618,37.963795525131225,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611011292531142,37.96441804411885,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.6102497862143,37.964672357256006,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61124280236523,37.96384636292281,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61120932055268,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61120116320066,37.9637402143881,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61091586590162,37.96432948589144,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611121188674204,37.964056523556096,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610785694137807,37.964224674067424,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[],[],[],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":4.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609614579202656,37.96378077298164,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611011292531142,37.96441804411885,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610137747792173,37.96460513420273,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611234777798586,37.96384525608603,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61119732982091,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611189142905975,37.96373731293766,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610900328271775,37.964329995321926,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611098706052143,37.964057422860975,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[],[],[],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":5.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609610555889134,37.96376602083206,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610946835847333,37.96441804411885,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61003131129115,37.964588328439405,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611226753231943,37.963844149249255,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611185339089143,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611177122611288,37.963734411487216,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61088479064193,37.96433050475241,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61107622343008,37.96405832216587,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"recce_1_Approach_the_area_and_check_the_customs_worker_and_the_coast_guards_for_possible_decontamination\",\"duration\":1}],[{\"command\":\"Recce_1_Approach_the_area_and_check_the_customs_worker_and_the_coast_guards_for_possible_decontamination\",\"duration\":1}],[],[],[],[],[{\"command\":\"Approach_the_area_and_check_the_customs_worker_and_the_coast_guards_for_possible_decontamination\",\"duration\":1}],[]]}]},{\"location\":[{\"timestep\":6.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.60960653257561,37.96375126868248,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610946835847333,37.96441804411885,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609863253657952,37.96456592075498,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.6112187286653,37.96384304241248,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611173348357376,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.6111651023166,37.96373151003677,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610869253012083,37.964331014182896,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610946723527007,37.9640619193854,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"recce_1_Enter_the_container_to_check_for_possible_radiatio\",\"duration\":1}],[{\"command\":\"Recce_1_Enter_the_container_to_check_for_possible_radiation\",\"duration\":1}],[],[],[],[],[{\"command\":\"Enter_the_container_to_check_for_possible_radiation\",\"duration\":1}],[]]}]},{\"location\":[{\"timestep\":7.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.60960250926209,37.9637365165329,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610946835847333,37.96441804411885,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611210704098657,37.9638419355757,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61116135762561,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611153082021914,37.96372860858633,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610853715382238,37.96433152361338,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610838806941114,37.96402954440963,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"recce_1_Element_leader_check_the_elements_for_possible_decontamination_\",\"duration\":1}],[{\"command\":\"Recce_1_Element_leader_check_the_elements_for_possible_decontamination\",\"duration\":1}],[],[],[],[],[{\"command\":\"Element_leader_check_the_elements_for_possible_decontamination\",\"duration\":1}],[]]}]},{\"location\":[{\"timestep\":8.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609598485948567,37.963721764383315,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610914607505425,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611202679532013,37.963840828738924,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61114936689384,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611141061727228,37.963725707135886,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61083817775239,37.96433203304387,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61074527923334,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"Recce_1_Proceed_to_decontamination_line_\",\"duration\":1}],[{\"command\":\"Recce_1_Proceed_to_decontamination_line\",\"duration\":1}],[],[],[],[],[{\"command\":\"Proceed_to_decontamination_line\",\"duration\":1}],[]]}]},{\"location\":[{\"timestep\":9.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609594462635044,37.96370701223373,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61088237916352,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61119465496537,37.96383972190215,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611137376162088,37.96391443338468,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61112904143254,37.96372280568544,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610822640122546,37.96433254247435,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61073939287411,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"recce_2_Enter_the_container_to_remove_and_shield_the_source_\",\"duration\":1}],[{\"command\":\"Recce_2_Enter_the_container_to_remove_and_shield_the_source\",\"duration\":1}],[],[{\"command\":\"Enter_the_container_to_remove_and_shield_the_source\",\"duration\":1}],[],[],[],[]]}]},{\"location\":[{\"timestep\":10.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609590439321522,37.96369226008415,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61086626499257,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611186630398727,37.96383861506537,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61102945957619,37.96390004450656,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611117021137854,37.963719904235,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.6108071024927,37.96433305190484,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61073350651488,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"recce_2_Once_the_source_is_shielded_enter_the_container_for_further_check\",\"duration\":1}],[{\"command\":\"Recce_2__Once_the_source_is_shielded_enter_the_container_for_further_check\",\"duration\":1}],[],[{\"command\":\"Once_the_source_is_shielded_enter_the_container_for_further_check\",\"duration\":1}],[],[],[],[]]}]},{\"location\":[{\"timestep\":11.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609586416008,37.96367750793457,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610753465795902,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611178605832084,37.96383750822859,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61092514020983,37.96388565562844,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611105000843168,37.963717002784556,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610791564862854,37.96433356133532,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61072762015565,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"Recce_2_Element_leader_check_the_elements_for_possible_decontamination\",\"duration\":1}],[{\"command\":\"Recce_2__Element_leader_check_the_elements_for_possible_decontamination\",\"duration\":1}],[],[{\"command\":\"Element_leader_check_the_elements_for_possible_decontamination\",\"duration\":1}],[],[],[],[]]}]},{\"location\":[{\"timestep\":12.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609582392694477,37.96366275578499,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610656780770185,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61117058126544,37.963836401391816,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610835209721582,37.963882058408906,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61109298054848,37.96371410133411,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61077602723301,37.96433407076581,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61072173379642,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"Recce_2_Proceed_to_decontamination_line\",\"duration\":1}],[{\"command\":\"Recce_2_Proceed_to_decontamination_line_\",\"duration\":1}],[],[{\"command\":\"Proceed_to_decontamination_line\",\"duration\":1}],[],[],[],[]]}]},{\"location\":[{\"timestep\":13.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609578369380955,37.963648003635406,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610576209915422,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611162556698794,37.96383529455502,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610759668111456,37.96389644728703,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611080960253794,37.96371119988367,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610760489603162,37.964334580196294,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61071584743719,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"recce_3__Enter_the_container_to_remove_and_isolate_the_second_source\",\"duration\":1}],[{\"command\":\"Recce_3_Enter_the_container_to_remove_and_isolate_the_second_source\",\"duration\":1}],[{\"command\":\"Enter_the_container_to_remove_and_isolate_the_second_source\",\"duration\":1}],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":14.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609574346067433,37.963633251485824,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610576209915422,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611097806747257,37.96381371123784,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610748876452867,37.96389524821385,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611068939959107,37.963708298433225,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610744951973317,37.96433508962678,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610709961077962,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"recce_3_Once_the_source_is_shielded_enter_the_container_for_further_check\",\"duration\":1}],[{\"command\":\"Recce_3_Once_the_source_is_shielded_enter_the_container_for_further_check\",\"duration\":1}],[{\"command\":\"Once_the_source_is_shielded_enter_the_container_for_further_check\",\"duration\":1}],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":15.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.60957032275391,37.96361849933624,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610576209915422,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61104744567384,37.96381371123784,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610738084794278,37.96389404914068,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61105691966442,37.96370539698278,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61072941434347,37.964335599057264,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610704074718733,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"recce_3_Element_leader_check_the_elements__the_vehicle_and_the_safety_box_for_possible_decontamination_\",\"duration\":1}],[{\"command\":\"Recce_3_Element_leader_check_the_elements_the_vehicle_and_the_safety_box_for_possible_decontamination\",\"duration\":1}],[{\"command\":\"Element_leader_check_the_elements__the_vehicle_and_the_safety_box_for_possible_decontamination_\",\"duration\":1}],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":16.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609566299440388,37.96360374718666,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610576209915422,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610957515185596,37.96380291957925,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61072729313569,37.9638928500675,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611044899369734,37.96370249553234,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610713876713625,37.96433610848775,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610698188359503,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"recce_3__Transport_the_shielded_sources_to_GAEC\",\"duration\":1}],[{\"command\":\"Transport_the_shielded_sources_to_GAEC_\",\"duration\":1}],[{\"command\":\"Transport_the_shielded_sources_to_GAEC\",\"duration\":1}],[],[],[],[],[]]}]},{\"location\":[{\"timestep\":17.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609562276126866,37.96358899503708,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610576209915422,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610932334648886,37.9638005214329,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.6107165014771,37.96389165099433,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.611032879075022,37.96369959408192,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61069833908378,37.964336617918235,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610692302000274,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"medical_Activation_for_casualty_care_purposes\",\"duration\":1}],[{\"command\":\"Medical_Activation_for_casualty_care_purposes\",\"duration\":1}],[],[],[{\"command\":\"Activation_for_casualty_care_purposes\",\"duration\":1}],[],[],[]]}]},{\"location\":[{\"timestep\":18.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609558252813343,37.963574242887496,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610576209915422,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609784826762464,37.96453230922834,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610907154112176,37.96379812328655,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61070570981851,37.96389045192115,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61094127613964,37.96368197813281,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610682801453933,37.96433712734872,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610686415641045,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"decontamination_Establish_incident_perimeter_if_needed\",\"duration\":1}],[{\"command\":\"Decontamination_Establish_incident_perimeter_if_needed\",\"duration\":1}],[],[{\"command\":\"Establish_incident_perimeter_if_needed\",\"duration\":1}],[],[],[],[]]}]},{\"location\":[{\"timestep\":19.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.60955422949982,37.963559490737914,31.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610576209915422,37.964434158289805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.60967381634208,37.96446638663171,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61088197357547,37.963795725140194,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610694918159922,37.96388925284797,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61084967320426,37.9636643621837,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.6106672638241,37.96433763677923,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.6106805292818,37.96403314162916,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610511753231613,37.964160217383615,31.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"End_of_exercise\",\"duration\":1}],[{\"command\":\"End_of_exercise\",\"duration\":1}],[{\"command\":\"End_of_exercise\",\"duration\":1}],[{\"command\":\"End_of_exercise\",\"duration\":1}],[{\"command\":\"End_of_exercise\",\"duration\":1}],[{\"command\":\"End_of_exercise\",\"duration\":1}],[{\"command\":\"End_of_exercise\",\"duration\":1}],[]]}]}],\"nodeNames\":[{\"nodeName\":\"gamma_probe\"},{\"nodeName\":\"General_Officer_2\"},{\"nodeName\":\"General_Officer_1\"},{\"nodeName\":\"CBRN_Recce_3\"},{\"nodeName\":\"CBRN_Recce_2\"},{\"nodeName\":\"CBRN_Medical_1\"},{\"nodeName\":\"CBRN_Decontamination_1\"},{\"nodeName\":\"CBRN_Recce_1\"},{\"nodeName\":\"Endeavour4\"}],\"Area\":\"Telonio_Geofence_HMOD\"}";
		
		String json = "{\"data\":[{\"location\":[{\"timestep\":0.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.611056266548157,37.96386526256561,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610824640481134,37.96453154204085,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"test2_1\",\"duration\":1}]]}]},{\"location\":[{\"timestep\":1.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.61047590448155,37.96406867425958,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.610000355391204,37.96443643222278,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[{\"command\":\"test2_2\",\"duration\":1}]]}]},{\"location\":[{\"timestep\":2.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.610761233935758,37.963383883569485,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.60982915771868,37.963777004150835,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[]]}]},{\"location\":[{\"timestep\":3.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609968652118514,37.96401794902327,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.61003839931843,37.963320477024105,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[{\"command\":\"test1_1\",\"duration\":1},{\"command\":\"test1_2\",\"duration\":1}],[{\"command\":\"test2_3\",\"duration\":1}]]}]},{\"location\":[{\"timestep\":4.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609541401352043,37.96425459191051,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609690558217533,37.963522367298104,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[{\"command\":\"test1_3\",\"duration\":1}],[]]}]},{\"location\":[{\"timestep\":5.0},{\"nodes\":[{\"nodeCommand\":\"goto\",\"node\":\"23.609469082871804,37.963734802833805,0.0\"},{\"nodeCommand\":\"goto\",\"node\":\"23.609821635462964,37.96462070421671,0.0\"}],\"sensors\":[{\"sensorsActDeact\":\"\"},{\"sensorsActDeact\":\"\"}],\"tasks\":[[],[]]}]}],\"nodeNames\":[{\"nodeName\":\"CBRN_Recce_1\"},{\"nodeName\":\"CBRN_Recce_2\"}],\"Area\":\"Telonio_Geofence_HMOD\"}";
		ObjectMapper objectMapper = new ObjectMapper();	
		List<Resource> resources = new ArrayList<Resource>();
		
		Mission mission = new Mission();

		try {
			DdlScript script = objectMapper.readValue(json, DdlScript.class);
			mission.setLocation(script.getArea());
			//System.out.println("area = " + script.getArea());
			// for first json inside location
			//System.out.println(script.getData().get(0).getLocation().get(0).getTimestep());
			// for second json inside location
			//System.out.println(script.getData().get(0).getLocation().get(1).getTasks().get(5).get(0).getCommand());

			for (int i = 0; i < script.getNodeNames().size(); i++) {
				Resource resource = new Resource();
				resource.setResourceName(script.getNodeNames().get(i).getNodeName());
				
				ResourceProjection projection = objectMapper.readValue(rc.getResource(rc.target, rc.getResourceReservation, script.getNodeNames().get(i).getNodeName()),ResourceProjection.class);
				
				resource.setPartition(projection.getPartition());
				resource.setResourceId(projection.getResourceId());
				resource.setResourceType(projection.getResourceType());
				
				//ResourceProjection resourceProjection = objectMapper.readValue(getResource(target,getResourceReservation,script.getNodeNames().get(i).getNodeName()), ResourceProjection.class);
				//resource.setResourceId(resourceProjection.resourceId);
				
				List<MissionParameters> missionParametersList = new ArrayList<MissionParameters>();
				//for datums
				for(int j = 0; j < script.getData().size() ; j++) {
					MissionParameters missionParameters = new MissionParameters();
					Goto gotoCommand = new Goto();
					
					String toSplit = script.getData().get(j).getLocation().get(1).getNodes().get(i).getNode();
					String[] coordinates = toSplit.split(",");
					
					gotoCommand.setLongitude(Double.parseDouble(coordinates[0]));
					gotoCommand.setLatitude(Double.parseDouble(coordinates[1]));
					gotoCommand.setHeight(Double.parseDouble(coordinates[2]));
										
					missionParameters.setGotoCommand(gotoCommand);
					
					Task tasks = new Task();
					List<TaskItems> taskItems = new ArrayList<TaskItems>();
					
					if(script.getData().get(j).getLocation().get(1).getTasks()!=null) {
					for(int k = 0; k <script.getData().get(j).getLocation().get(1).getTasks().get(i).size() ; k++) {
						TaskItems taskItem = new TaskItems();
						if(script.getData().get(j).getLocation().get(1).getTasks().get(i).get(k) != null) {
							taskItem.setTaskMessage(script.getData().get(j).getLocation().get(1).getTasks().get(i).get(k).getCommand());
							taskItem.setDuration(script.getData().get(j).getLocation().get(1).getTasks().get(i).get(k).getDuration());
							taskItems.add(taskItem);
						}
						else {
							taskItem = null;
							taskItems.add(taskItem);
						}
					}
					tasks.setTaskItems(taskItems);
					}
					else{
						tasks = null;
					}
							
					
					missionParameters.setTask(tasks);
					missionParametersList.add(missionParameters);
					//script.getData().get(j).getLocation().get(1).getNodes().get(i).getNodeCommand();
					//script.getData().get(j).getLocation().get(1).getTasks()
				}
				resource.setMissionParameters(missionParametersList);
				
				System.out.println(resource);
				
				resources.add(resource);
			}

		} catch (IOException e) {
		    e.printStackTrace();
		}
		
		mission.setResources(resources);
		
		//System.out.print(resources.get(0).getResourceName());
		//System.out.print(resources.get(0).getResourceId());


		//System.out.print(resources.get(0).getMissionParameters().get(0).getGotoCommand().getLatitude());
		//System.out.print(resources.get(4).getMissionParameters().get(0).getTask().getTaskItems().get(0).getTaskMessage());

		//latitude":0.6626192910305271,"longitude":0.4120851134350824
		
		 //"latitude": 0.6626116307804399, "longitude": 0.4120929586900702
		
//0.6626130497331219 0.4120914786508645
		
		System.out.println(Math.toRadians(0.6626192910305271) + " " + Math.toRadians(0.4120851134350824));
		System.out.println(Math.toDegrees(0.6626106970292901) + " " + Math.toDegrees(0.41209389942253694));
		System.out.println(Math.toDegrees(0.6626132207753886) + " " + Math.toDegrees(0.4120915676626563));

		
		//System.out.print(0.6626192910305271 * (180 / 3.14) + " " + 0.4120851134350824 * (180 / 3.14));

		

		
		//static properties for now
		String brokers = "tara.di.uoa.gr:9092";
		String schemaRegistry = "http://tara.di.uoa.gr:8081";
		String groupId = "RelocateRC";
		String testbed = "hmod";
		
		//operations
		Boolean boringMode = true;
		Boolean repeatingMode = false;
		Double acceptedDistance = 2.0;
		Boolean indoor = true;
		
		GotoProducer gotoProducer = new GotoProducer(brokers, schemaRegistry, testbed + "_Goto");
		ManualTaskProducer manualTaskProducer = new ManualTaskProducer(brokers, schemaRegistry, testbed + "_ManualTask");
		
		Quartet<Boolean,Boolean,Double,Boolean> functions = new Quartet<Boolean,Boolean,Double,Boolean>(boringMode, repeatingMode, acceptedDistance, indoor); //boringMode,repeatingMode,acceptedDistance,indoor

		//Integer partition1 = 1;
		//Integer partition2 = 2;
	

/*		ArrayList<Triplet<Double,Double,Float>> coordinates1 =new ArrayList<Triplet<Double,Double,Float>>();
		ArrayList<Triplet<Double,Double,Float>> coordinates2 =new ArrayList<Triplet<Double,Double,Float>>();*/

		
/*		coordinates1.add(Triplet.with(Math.toRadians(37.99562583619493),Math.toRadians(23.58124716716269),50.0f));
		coordinates1.add(Triplet.with(Math.toRadians(37.9957996252333),Math.toRadians(23.581488293512365),50.0f));
		coordinates1.add(Triplet.with(Math.toRadians(37.995816561350345),Math.toRadians(23.581043608392527),50.0f));
		coordinates1.add(Triplet.with(Math.toRadians(37.995816561272555),Math.toRadians(23.58102755601206),50.0f));
		coordinates1.add(Triplet.with(Math.toRadians(37.99579538621159),Math.toRadians(23.58055076646017),50.0f));
		coordinates1.add(Triplet.with(Math.toRadians(37.995765741402295),Math.toRadians(23.580143537624313),50.0f));
		coordinates1.add(Triplet.with(Math.toRadians(37.99567239905363),Math.toRadians(23.57969350446044),50.0f));
		coordinates1.add(Triplet.with(Math.toRadians(37.99554528673035),Math.toRadians(23.580298942116794),50.0f));
		coordinates1.add(Triplet.with(Math.toRadians(37.99553249799149),Math.toRadians(23.58078643191118),50.0f));
		
		coordinates2.add(Triplet.with(Math.toRadians(37.99562583619493),Math.toRadians(23.58124716716269),70.0f));
		coordinates2.add(Triplet.with(Math.toRadians(37.9957996252333),Math.toRadians(23.581488293512365),70.0f));
		coordinates2.add(Triplet.with(Math.toRadians(37.995816561350345),Math.toRadians(23.581043608392527),70.0f));
		coordinates2.add(Triplet.with(Math.toRadians(37.995816561272555),Math.toRadians(23.58102755601206),70.0f));
		coordinates2.add(Triplet.with(Math.toRadians(37.99579538621159),Math.toRadians(23.58055076646017),70.0f));
		coordinates2.add(Triplet.with(Math.toRadians(37.995765741402295),Math.toRadians(23.580143537624313),70.0f));
		coordinates2.add(Triplet.with(Math.toRadians(37.99567239905363),Math.toRadians(23.57969350446044),70.0f));
		coordinates2.add(Triplet.with(Math.toRadians(37.99554528673035),Math.toRadians(23.580298942116794),70.0f));
		coordinates2.add(Triplet.with(Math.toRadians(37.99553249799149),Math.toRadians(23.58078643191118),70.0f));
*/
	
/*		ArrayList<Pair<Integer,ArrayList<Triplet<Double,Double,Float>>>> coordinatedPerPartition =new ArrayList<Pair<Integer,ArrayList<Triplet<Double,Double,Float>>>>();
		coordinatedPerPartition.add(Pair.with(partition1, coordinates1));
	    coordinatedPerPartition.add(Pair.with(partition2, coordinates2));*/
		
		
		
		
		SimpleRCConsumers partitonConsumerGroup = new SimpleRCConsumers(brokers, schemaRegistry,groupId, testbed, mission,functions, gotoProducer, manualTaskProducer);
		partitonConsumerGroup.execute();
	}

	
	public String getResource(String target, String path, String resourceName) {
		Client client = ClientBuilder.newClient(createClientConfig());
		//System.out.println(path+"/"+resourceName);
		String entity = client.target(target).path(path+"/"+resourceName)
				.request(MediaType.APPLICATION_JSON).header("header", "true").get(String.class);
		//System.out.println(entity);
		return entity;
	}
	
	protected ClientConfig createClientConfig() {
		ClientConfig config = new ClientConfig();
		config.register(new LoggingFeature(Logger.getLogger(LoggingFeature.DEFAULT_LOGGER_NAME), Level.INFO, LoggingFeature.Verbosity.PAYLOAD_ANY, 10000));
		return config;
	}

}
